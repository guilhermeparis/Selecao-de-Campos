<!DOCTYPE html>
<html lang="pt-br">

<head>
    <style type="text/css">
    select{
        display: none;
    }
    </style>

    <meta charset="UTF-8">
    <title>Seleção de campos do arquivo</title>
</head>

<body>
    <div id="select_file">
    <input type="file" name="your_file" id="file">
    </div>
    <br/>


    <div id="csv_fields">
    </div>

    <script>
        var graphicValues = ["barraVertical", "pizza", "donut", "mapa"];
        var graphicTypes = ["Barra Vertical", "Pizza", "Donut", "Mapa"];

        document.getElementById('file').onchange = function(){
        var file = this.files[0];
        var reader = new FileReader();

        reader.onload = function(progressEvent){
            var lines = this.result.split('\n');
            var columns = lines[0].split(';');
            var container = document.getElementById("csv_fields");
            
            for(i = 0; i < columns.length; i++){ 
                var input = document.createElement("input");
                input.type = "checkbox";
                input.id = "field" + i;
                container.appendChild(input);
                container.appendChild(document.createTextNode(columns[i]));
                
                var graphic = document.createElement("select");
                console.log(graphic);
                graphic.id = "field"+i+"_graphType";
                
                var graphic_filling = document.getElementById(graphic.id)
                console.log(graphic_filling);
                
                var option = document.createElement("option");
                console.log(option);

                for(j = 0; j < graphicTypes.length; j++){
                    option.value = graphicValues[j];
                    option.innerHTML = graphicTypes[j];
                    graphic_filling.appendChild(option);
                }
                
                container.appendChild(document.createElement("br"));
            }
        }
        reader.readAsText(file);
    }

    function action(){
        alert("ok")
    }

    </script>
</body>
</html>

<!--
        <form id="selection_form" action="">
            <select name="graph_type" required>
                <option value="barras">Barra Vertical</option>
                <option value="pizza">Pizza</option>
                <option value="donut">Donut</option>
                <option value="mapa">Mapa Geolocalizado</option>
            </select>
        <input type="submit">
-->